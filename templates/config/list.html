
{% extends "base.html" %}
{% block content %}
<h2>{{ title }} – {{ client.name }}</h2>
<a class="btn" href="{{ url_for('config.create_entity', client_id=client.id, entity_key=entity_key) }}">Ajouter</a>
<table id="data-table" class="display">
  <thead>
    <tr>
      {% if items %}
        {% for col in items[0].__table__.columns %}
          <th>{{ col.name }}</th>
        {% endfor %}
      {% endif %}
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      <tr>
        {% for col in item.__table__.columns %}
          <td>{{ item|attr(col.name) }}</td>
        {% endfor %}
        <td>
          <a href="{{ url_for('config.edit_entity', client_id=client.id, entity_key=entity_key, item_id=item.id) }}">Éditer</a>
          <form method="post" action="{{ url_for('config.delete_entity', client_id=client.id, entity_key=entity_key, item_id=item.id) }}" style="display:inline">
            <button type="submit" onclick="return confirm('Supprimer ?');">Supprimer</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block scripts %}
{{ super() }}
<script>
$('#data-table').DataTable({info:false,lengthChange:false});
</script>
{% endblock %}
