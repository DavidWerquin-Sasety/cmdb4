
{% extends "base.html" %}
{% block content %}
<h2>{{ site.name }} ({{ site.code }})</h2>

<h3>Accès Internet</h3>
{% if site.accesses|length < 3 %}
<button hx-get="{{ url_for('site_manage.create_access', client_id=client.id, site_id=site.id) }}" hx-target="#access-table tbody" hx-swap="beforeend">Ajouter</button>
{% endif %}
<table id="access-table" class="display">
  <thead><tr><th>Type</th><th>Contrat</th><th>Début</th><th>Actions</th></tr></thead>
  <tbody>
    {% for acc in site.accesses %}
      {% include "sites/rows/access_row.html" with context %}
    {% endfor %}
  </tbody>
</table>

<h3>Licence SASE</h3>
{% if not site.licenses %}
<button hx-get="{{ url_for('site_manage.create_license', client_id=client.id, site_id=site.id) }}" hx-target="#lic-table tbody" hx-swap="beforeend">Ajouter</button>
{% endif %}
<table id="lic-table" class="display">
  <thead><tr><th>Type</th><th>Début</th><th>Actions</th></tr></thead>
  <tbody>
    {% for lic in site.licenses %}
      {% include "sites/rows/license_row.html" with context %}
    {% endfor %}
  </tbody>
</table>

<h3>Équipements SASE</h3>
{% if site.equipments|length < 2 %}
<button hx-get="{{ url_for('site_manage.create_equipment', client_id=client.id, site_id=site.id) }}" hx-target="#eq-table tbody" hx-swap="beforeend">Ajouter</button>
{% endif %}
<table id="eq-table" class="display">
  <thead><tr><th>Type</th><th>S/N</th><th>Début</th><th>Actions</th></tr></thead>
  <tbody>
    {% for eq in site.equipments %}
      {% include "sites/rows/equipment_row.html" with context %}
    {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block scripts %}
{{ super() }}
<script>
$('#access-table, #lic-table, #eq-table').DataTable({info:false,lengthChange:false});
</script>
{% endblock %}
